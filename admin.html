<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pannello Admin - ZENOVA</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Raleway:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>ZENOVA <span style="color: var(--accent-color);">|</span> ADMIN</h1>
                <p>Pannello di Controllo</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="username" placeholder="Inserisci username" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" placeholder="Inserisci password" required>
                </div>
                <button type="submit" class="btn-login">Accedi</button>
                <p class="login-hint">Demo: admin / admin123</p>
            </form>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel" style="display: none;">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-logo">
                <h2>ZENOVA</h2>
                <p>Admin Panel</p>
            </div>
            <nav class="admin-nav">
                <a href="#dashboard" class="admin-nav-link active" data-section="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a href="#products" class="admin-nav-link" data-section="products">
                    <span class="nav-icon">üì¶</span>
                    <span>Gestione Prodotti</span>
                </a>
                <a href="#catalog" class="admin-nav-link" data-section="catalog">
                    <span class="nav-icon">üîç</span>
                    <span>Browser Catalogo</span>
                </a>
                <a href="#categories" class="admin-nav-link" data-section="categories">
                    <span class="nav-icon">üìÇ</span>
                    <span>Gestione Categorie</span>
                </a>
                <a href="#layout" class="admin-nav-link" data-section="layout">
                    <span class="nav-icon">üé®</span>
                    <span>Layout Sito</span>
                </a>
                <a href="#pricing" class="admin-nav-link" data-section="pricing">
                    <span class="nav-icon">üí∞</span>
                    <span>Calcolatore Prezzi</span>
                </a>
                <a href="#sync" class="admin-nav-link" data-section="sync">
                    <span class="nav-icon">üîÑ</span>
                    <span>Sincronizzazione</span>
                </a>
                <a href="#orders" class="admin-nav-link" data-section="orders">
                    <span class="nav-icon">üõí</span>
                    <span>Ordini</span>
                </a>
            </nav>
            <div class="admin-sidebar-footer">
                <button id="logoutBtn" class="btn-logout">Esci</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="admin-section active">
                <div class="section-header">
                    <h1>Dashboard</h1>
                    <p>Panoramica generale del tuo e-commerce</p>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">üì¶</div>
                        <div class="stat-info">
                            <h3>247</h3>
                            <p>Prodotti Totali</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">‚úÖ</div>
                        <div class="stat-info">
                            <h3>231</h3>
                            <p>Disponibili</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">üõí</div>
                        <div class="stat-info">
                            <h3>12</h3>
                            <p>Ordini Oggi</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">üí∞</div>
                        <div class="stat-info">
                            <h3>‚Ç¨ 1,247</h3>
                            <p>Vendite Oggi</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h2>Azioni Rapide</h2>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="switchSection('products')">
                            <span>üì¶</span>
                            Gestisci Prodotti
                        </button>
                        <button class="action-btn" onclick="switchSection('sync')">
                            <span>üîÑ</span>
                            Sincronizza BigBuy
                        </button>
                        <button class="action-btn" onclick="switchSection('pricing')">
                            <span>üí∞</span>
                            Calcola Prezzi
                        </button>
                        <button class="action-btn" onclick="window.open('index.html', '_blank')">
                            <span>üåê</span>
                            Vedi Sito
                        </button>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="recent-activity">
                    <h2>Attivit√† Recente</h2>
                    <div class="activity-list">
                        <div class="activity-item">
                            <span class="activity-icon">üîÑ</span>
                            <div class="activity-info">
                                <p><strong>Sincronizzazione completata</strong></p>
                                <small>2 ore fa - 247 prodotti aggiornati</small>
                            </div>
                        </div>
                        <div class="activity-item">
                            <span class="activity-icon">üõí</span>
                            <div class="activity-info">
                                <p><strong>Nuovo ordine #1234</strong></p>
                                <small>3 ore fa - Set Oli Essenziali Premium</small>
                            </div>
                        </div>
                        <div class="activity-item">
                            <span class="activity-icon">‚ö†Ô∏è</span>
                            <div class="activity-info">
                                <p><strong>3 prodotti esauriti</strong></p>
                                <small>5 ore fa - Stock BigBuy aggiornato</small>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Products Section -->
            <section id="products" class="admin-section">
                <div class="section-header">
                    <h1>Gestione Prodotti</h1>
                    <p>Organizza i prodotti sul tuo sito con drag & drop</p>
                </div>

                <!-- Import Product from BigBuy -->
                <div class="import-product-section" style="margin-bottom: 30px;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white;">
                        <h3 style="margin: 0 0 15px 0;">üì¶ Importa Prodotto da BigBuy (CSV Locali)</h3>
                        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px;">
                            <input type="text" id="importSKU" placeholder="Inserisci SKU BigBuy (es. V0103345)" style="flex: 2; padding: 12px; border: none; border-radius: 8px; font-size: 14px;">
                            <select id="importCategory" style="flex: 1; padding: 12px; border: none; border-radius: 8px; font-size: 14px; cursor: pointer;">
                                <option value="">Scegli Categoria...</option>
                                <option value="beauty">Beauty</option>
                                <option value="health-personal-care">Health & Personal Care</option>
                                <option value="smart-living">Smart Living</option>
                                <option value="natural-wellness">Natural Wellness</option>
                                <option value="tech-innovation">Tech Innovation</option>
                            </select>
                            <button onclick="searchProductPreview()" style="padding: 12px 30px; background: white; color: #667eea; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; white-space: nowrap;">
                                üîç Cerca Prodotto
                            </button>
                        </div>
                        <small style="opacity: 0.9; display: block;">Cerca il prodotto nei CSV locali per vedere un'anteprima prima di importarlo</small>

                        <!-- Product Preview Area -->
                        <div id="productPreview" style="display: none; margin-top: 20px; padding: 20px; background: white; border-radius: 8px; color: #333;">
                            <h4 style="margin: 0 0 15px 0; color: #667eea;">Anteprima Prodotto</h4>
                            <div style="display: flex; gap: 20px; align-items: start;">
                                <img id="previewImage" src="" alt="Prodotto" style="width: 120px; height: 120px; object-fit: cover; border-radius: 8px; border: 2px solid #e0e0e0;">
                                <div style="flex: 1;">
                                    <h3 id="previewName" style="margin: 0 0 10px 0; font-size: 18px;">Nome Prodotto</h3>
                                    <p id="previewBrand" style="margin: 0 0 5px 0; color: #666; font-size: 14px;"><strong>Brand:</strong> </p>
                                    <p id="previewPrice" style="margin: 0 0 5px 0; color: #666; font-size: 14px;"><strong>Prezzo vendita:</strong> </p>
                                    <p id="previewCost" style="margin: 0 0 5px 0; color: #666; font-size: 14px;"><strong>Tuo costo:</strong> </p>
                                    <p id="previewMargin" style="margin: 0 0 5px 0; color: #43e97b; font-size: 14px;"><strong>Margine:</strong> </p>
                                    <p id="previewStock" style="margin: 0 0 5px 0; color: #666; font-size: 14px;"><strong>Stock:</strong> </p>
                                    <p id="previewImages" style="margin: 0; color: #666; font-size: 14px;"><strong>Immagini:</strong> </p>
                                </div>
                            </div>
                            <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
                                <button onclick="cancelImport()" style="padding: 10px 25px; background: #e0e0e0; color: #666; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
                                    Annulla
                                </button>
                                <button onclick="confirmImport()" style="padding: 10px 25px; background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
                                    ‚úÖ Conferma Importazione
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="products-layout">
                    <!-- Home Products -->
                    <div class="product-zone">
                        <div class="zone-header">
                            <h3>üè† Home - Vetrina Principale</h3>
                            <span class="zone-count">6 prodotti</span>
                        </div>
                        <div id="homeProducts" class="product-drop-zone">
                            <div class="product-card-admin" draggable="true" data-id="1">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <img src="https://via.placeholder.com/80" alt="Prodotto">
                                <div class="product-admin-info">
                                    <h4>Diffusore Aromi Premium</h4>
                                    <p class="product-price">‚Ç¨ 29.90</p>
                                    <span class="product-status available">‚úÖ Disponibile</span>
                                </div>
                                <div class="product-actions">
                                    <button class="btn-icon" title="Modifica">‚úèÔ∏è</button>
                                    <button class="btn-icon" title="Nascondi">üëÅÔ∏è</button>
                                </div>
                            </div>
                            <div class="product-card-admin" draggable="true" data-id="2">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <img src="https://via.placeholder.com/80" alt="Prodotto">
                                <div class="product-admin-info">
                                    <h4>Set Oli Essenziali Bio</h4>
                                    <p class="product-price">‚Ç¨ 45.90</p>
                                    <span class="product-status available">‚úÖ Disponibile</span>
                                </div>
                                <div class="product-actions">
                                    <button class="btn-icon" title="Modifica">‚úèÔ∏è</button>
                                    <button class="btn-icon" title="Nascondi">üëÅÔ∏è</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar Products -->
                    <div class="product-zone">
                        <div class="zone-header">
                            <h3>üìå Sidebar - Prodotti in Evidenza</h3>
                            <span class="zone-count">4 prodotti</span>
                        </div>
                        <div id="sidebarProducts" class="product-drop-zone">
                            <div class="product-card-admin" draggable="true" data-id="3">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <img src="https://via.placeholder.com/80" alt="Prodotto">
                                <div class="product-admin-info">
                                    <h4>Olio Lavanda Bio</h4>
                                    <p class="product-price">‚Ç¨ 12.90</p>
                                    <span class="product-status available">‚úÖ Disponibile</span>
                                </div>
                                <div class="product-actions">
                                    <button class="btn-icon" title="Modifica">‚úèÔ∏è</button>
                                    <button class="btn-icon" title="Nascondi">üëÅÔ∏è</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Hidden Products -->
                    <div class="product-zone">
                        <div class="zone-header">
                            <h3>üö´ Prodotti Nascosti</h3>
                            <span class="zone-count">2 prodotti</span>
                        </div>
                        <div id="hiddenProducts" class="product-drop-zone">
                            <div class="product-card-admin" draggable="true" data-id="4">
                                <span class="drag-handle">‚ãÆ‚ãÆ</span>
                                <img src="https://via.placeholder.com/80" alt="Prodotto">
                                <div class="product-admin-info">
                                    <h4>Candela Aromatica</h4>
                                    <p class="product-price">‚Ç¨ 15.90</p>
                                    <span class="product-status unavailable">‚ùå Esaurito</span>
                                </div>
                                <div class="product-actions">
                                    <button class="btn-icon" title="Modifica">‚úèÔ∏è</button>
                                    <button class="btn-icon" title="Mostra">üëÅÔ∏è</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- All Products List with Zone Selection -->
                <div class="all-products-section">
                    <div class="section-header">
                        <h2>Tutti i Prodotti (<span id="totalProductsCount">0</span>)</h2>
                        <input type="text" id="productSearch" class="search-input" placeholder="üîç Cerca prodotto per nome...">
                    </div>
                    <div id="productSearchInfo" style="padding: 10px 20px; background: #f0f7ff; border-radius: 8px; margin-bottom: 15px; display: none;">
                        <span id="visibleProductsCount">0</span> prodotti visibili
                    </div>
                    <div id="allProductsList" class="all-products-list">
                        <!-- Products will be loaded here by JavaScript -->
                        <div class="loading-message">Caricamento prodotti...</div>
                    </div>
                </div>
            </section>

            <!-- Catalog Browser Section -->
            <section id="catalog" class="admin-section">
                <div class="section-header">
                    <h1>Browser Catalogo BigBuy</h1>
                    <p>Esplora e importa prodotti dal catalogo completo BigBuy (21.000+ prodotti)</p>
                </div>

                <!-- Filters and Search -->
                <div class="catalog-filters">
                    <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 300px;">
                            <input type="text"
                                   id="catalogSearch"
                                   placeholder="üîç Cerca per nome o SKU..."
                                   style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                        </div>
                        <div>
                            <select id="catalogCategory"
                                    style="padding: 12px 20px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; cursor: pointer;">
                                <option value="all">Tutte le Categorie</option>
                                <option value="beauty">Beauty</option>
                                <option value="health-personal-care">Health & Personal Care</option>
                                <option value="smart-living">Smart Living</option>
                                <option value="natural-wellness">Natural Wellness</option>
                                <option value="tech-innovation">Tech Innovation</option>
                            </select>
                        </div>
                        <button onclick="loadCatalogProducts()"
                                style="padding: 12px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
                            üîÑ Aggiorna
                        </button>
                    </div>
                </div>

                <!-- Catalog Stats -->
                <div style="display: flex; gap: 15px; margin: 20px 0; padding: 15px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 12px;">
                    <div style="flex: 1; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #667eea;" id="catalogTotalCount">0</div>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">Prodotti Totali</div>
                    </div>
                    <div style="flex: 1; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #43e97b;" id="catalogFilteredCount">0</div>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">Risultati</div>
                    </div>
                    <div style="flex: 1; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #f5576c;" id="catalogImportedCount">0</div>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">Gi√† Importati</div>
                    </div>
                </div>

                <!-- Catalog Products Grid -->
                <div id="catalogProductsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin: 20px 0;">
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #999;">
                        Caricamento prodotti...
                    </div>
                </div>

                <!-- Pagination -->
                <div id="catalogPagination" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin: 30px 0;">
                    <!-- Pagination will be inserted here by JavaScript -->
                </div>
            </section>

            <!-- Categories Management Section -->
            <section id="categories" class="admin-section">
                <div class="section-header">
                    <h1>Gestione per Categorie</h1>
                    <p>Organizza i prodotti per categoria e sottocategoria</p>
                </div>

                <!-- Filter by Main Category -->
                <div style="margin-bottom: 30px;">
                    <div style="display: flex; gap: 15px; align-items: center; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px;">
                        <label style="color: white; font-weight: 600; min-width: 150px;">Categoria Principale:</label>
                        <select id="mainCategoryFilter" onchange="loadProductsByCategory()" style="flex: 1; padding: 12px; border: none; border-radius: 8px; font-size: 14px; cursor: pointer;">
                            <option value="all">Tutte le Categorie</option>
                            <option value="beauty">Beauty</option>
                            <option value="health-personal-care">Health & Personal Care</option>
                            <option value="smart-living">Smart Living</option>
                            <option value="natural-wellness">Natural Wellness</option>
                            <option value="tech">Tech Innovation</option>
                        </select>
                        <button type="button" onclick="loadProductsByCategory()" style="padding: 12px 30px; background: white; color: #667eea; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
                            üîÑ Aggiorna
                        </button>
                    </div>
                </div>

                <!-- Categories Grid -->
                <div id="categoriesGrid" style="display: grid; gap: 30px;">
                    <div style="text-align: center; padding: 60px; color: #999;">
                        <div style="font-size: 48px; margin-bottom: 20px;">üìÇ</div>
                        <h3>Seleziona una categoria per iniziare</h3>
                        <p>Clicca su "Aggiorna" per visualizzare i prodotti</p>
                    </div>
                </div>
            </section>

            <!-- Layout Section -->
            <section id="layout" class="admin-section">
                <div class="section-header">
                    <h1>Layout Sito</h1>
                    <p>Personalizza l'aspetto delle pagine</p>
                </div>

                <div class="layout-settings">
                    <div class="setting-card">
                        <h3>Homepage</h3>
                        <div class="setting-option">
                            <label>Prodotti in evidenza:</label>
                            <select class="form-select">
                                <option value="3">3 prodotti</option>
                                <option value="6" selected>6 prodotti</option>
                                <option value="9">9 prodotti</option>
                            </select>
                        </div>
                        <div class="setting-option">
                            <label>Layout griglia:</label>
                            <select class="form-select">
                                <option value="2">2 colonne</option>
                                <option value="3" selected>3 colonne</option>
                                <option value="4">4 colonne</option>
                            </select>
                        </div>
                    </div>

                    <div class="setting-card">
                        <h3>Sidebar</h3>
                        <div class="setting-option">
                            <label>Mostra sidebar:</label>
                            <input type="checkbox" checked> Attiva
                        </div>
                        <div class="setting-option">
                            <label>Prodotti sidebar:</label>
                            <select class="form-select">
                                <option value="3">3 prodotti</option>
                                <option value="4" selected>4 prodotti</option>
                                <option value="5">5 prodotti</option>
                            </select>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pricing Calculator Section -->
            <section id="pricing" class="admin-section">
                <div class="section-header">
                    <h1>Calcolatore Prezzi</h1>
                    <p>Calcola automaticamente i prezzi di vendita</p>
                </div>

                <div class="pricing-calculator">
                    <div class="calculator-form">
                        <h3>Calcola Prezzo Prodotto</h3>
                        <div class="form-group">
                            <label>Prezzo BigBuy (all'ingrosso):</label>
                            <input type="number" id="bigbuyPrice" placeholder="15.00" step="0.01">
                        </div>
                        <div class="form-group">
                            <label>Costo Spedizione:</label>
                            <input type="number" id="shippingCost" placeholder="3.50" step="0.01">
                        </div>
                        <div class="form-group">
                            <label>Costi Gestione (‚Ç¨):</label>
                            <input type="number" id="managementCost" placeholder="2.00" step="0.01">
                        </div>
                        <div class="form-group">
                            <label>Margine Desiderato (%):</label>
                            <input type="number" id="profitMargin" placeholder="50" step="1">
                        </div>
                        <button class="btn-primary" onclick="calculatePrice()">Calcola Prezzo</button>
                    </div>

                    <div class="calculator-result">
                        <h3>Risultato Calcolo</h3>
                        <div class="result-breakdown">
                            <div class="result-row">
                                <span>Costo Totale Prodotto:</span>
                                <strong id="totalCost">‚Ç¨ 0.00</strong>
                            </div>
                            <div class="result-row">
                                <span>Margine Applicato:</span>
                                <strong id="marginAmount">‚Ç¨ 0.00</strong>
                            </div>
                            <div class="result-row highlight">
                                <span>Prezzo Vendita Consigliato:</span>
                                <strong id="finalPrice" class="final-price">‚Ç¨ 0.00</strong>
                            </div>
                            <div class="result-row">
                                <span>Tuo Guadagno Netto:</span>
                                <strong id="netProfit" class="profit">‚Ç¨ 0.00</strong>
                            </div>
                        </div>
                        <div class="pricing-tips">
                            <h4>üí° Suggerimenti</h4>
                            <ul>
                                <li>Margine standard dropshipping: 50-100%</li>
                                <li>Prodotti premium: fino a 200%</li>
                                <li>Considera i competitor</li>
                                <li>Arrotonda sempre a .90 o .99</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Bulk Pricing -->
                <div class="bulk-pricing">
                    <h3>Impostazioni Prezzi Multipli</h3>
                    <div class="bulk-options">
                        <div class="bulk-category">
                            <label>Categoria: Diffusori</label>
                            <input type="number" placeholder="Margine %" value="100">
                            <button class="btn-secondary">Applica a tutti</button>
                        </div>
                        <div class="bulk-category">
                            <label>Categoria: Oli Essenziali</label>
                            <input type="number" placeholder="Margine %" value="80">
                            <button class="btn-secondary">Applica a tutti</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sync Section -->
            <section id="sync" class="admin-section">
                <div class="section-header">
                    <h1>Sincronizzazione BigBuy</h1>
                    <p>Gestisci la sincronizzazione con il catalogo BigBuy</p>
                </div>

                <!-- Sync Status -->
                <div class="sync-status-card">
                    <div class="sync-icon">
                        <div class="sync-spinner">üîÑ</div>
                    </div>
                    <div class="sync-info">
                        <h3>Stato Sincronizzazione</h3>
                        <p class="sync-status-text">‚úÖ Sincronizzato - Tutto aggiornato</p>
                        <small>Ultima sincronizzazione: Oggi alle 14:05</small>
                    </div>
                    <button class="btn-sync" onclick="syncNow()">Sincronizza Ora</button>
                </div>

                <!-- Auto-Sync Beauty + Health -->
                <div class="sync-status-card" style="margin-top: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <div class="sync-icon">
                        <div style="font-size: 3rem;">ü§ñ</div>
                    </div>
                    <div class="sync-info">
                        <h3 style="color: white;">Sincronizzazione Automatica Beauty + Health</h3>
                        <p id="autoSyncStatus" style="color: rgba(255,255,255,0.9);">‚è≥ In attesa...</p>
                        <small id="autoSyncDetails" style="color: rgba(255,255,255,0.8);">Scarica automaticamente nuovi prodotti da categorie Beauty e Health</small>
                    </div>
                    <button class="btn-sync" style="background: white; color: #667eea;" onclick="runAutoSync()">Avvia Auto-Sync</button>
                </div>

                <!-- Auto-Sync Info -->
                <div style="margin-top: 1.5rem; padding: 1.5rem; background: #f8f9fa; border-radius: 12px; border-left: 4px solid #667eea;">
                    <h4 style="margin-top: 0; color: #667eea;">‚ÑπÔ∏è Filtri di Qualit√† Attivi</h4>
                    <ul style="list-style: none; padding: 0; margin: 0.5rem 0;">
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #dee2e6;">‚úÖ Solo prodotti con stock disponibile</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #dee2e6;">‚úÖ Prezzo minimo: ‚Ç¨2.00</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #dee2e6;">‚úÖ Richieste immagini di qualit√†</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #dee2e6;">‚úÖ Descrizione prodotto obbligatoria</li>
                        <li style="padding: 0.5rem 0;">‚úÖ Max 50 nuovi prodotti per categoria</li>
                    </ul>
                    <p style="margin: 1rem 0 0; font-size: 0.9rem; color: #6c757d;">
                        <strong>Categorie BigBuy sincronizzate:</strong><br>
                        üíÑ Beauty (7 categorie) | üè• Health & Personal Care (4 categorie)
                    </p>
                </div>

                <!-- Sync Schedule -->
                <div class="sync-schedule">
                    <h3>Pianificazione Aggiornamenti</h3>
                    <p>BigBuy aggiorna il catalogo 3 volte al giorno</p>
                    <div class="schedule-times">
                        <div class="schedule-item">
                            <span class="time-icon">üïê</span>
                            <div>
                                <strong>08:00</strong>
                                <p>Mattina</p>
                            </div>
                            <span class="status-badge done">‚úÖ Completato</span>
                        </div>
                        <div class="schedule-item">
                            <span class="time-icon">üïí</span>
                            <div>
                                <strong>14:00</strong>
                                <p>Pomeriggio</p>
                            </div>
                            <span class="status-badge done">‚úÖ Completato</span>
                        </div>
                        <div class="schedule-item">
                            <span class="time-icon">üïó</span>
                            <div>
                                <strong>20:00</strong>
                                <p>Sera</p>
                            </div>
                            <span class="status-badge pending">‚è≥ In attesa</span>
                        </div>
                    </div>
                </div>

                <!-- Sync Details -->
                <div class="sync-details">
                    <h3>Dettagli Ultimo Aggiornamento</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="detail-icon">üì¶</span>
                            <div>
                                <strong>247</strong>
                                <p>Prodotti totali</p>
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">üÜï</span>
                            <div>
                                <strong>7</strong>
                                <p>Nuovi disponibili</p>
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">‚ùå</span>
                            <div>
                                <strong>3</strong>
                                <p>Esauriti</p>
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">üí∞</span>
                            <div>
                                <strong>12</strong>
                                <p>Prezzi aggiornati</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sync Log -->
                <div class="sync-log">
                    <h3>Log Sincronizzazioni</h3>
                    <div class="log-list">
                        <div class="log-item success">
                            <span class="log-icon">‚úÖ</span>
                            <div class="log-info">
                                <strong>Sincronizzazione completata</strong>
                                <p>14:05 - 247 prodotti aggiornati, 3 esauriti, 7 nuovi disponibili</p>
                            </div>
                        </div>
                        <div class="log-item success">
                            <span class="log-icon">‚úÖ</span>
                            <div class="log-info">
                                <strong>Sincronizzazione completata</strong>
                                <p>08:05 - 247 prodotti aggiornati, 1 esaurito</p>
                            </div>
                        </div>
                        <div class="log-item warning">
                            <span class="log-icon">‚ö†Ô∏è</span>
                            <div class="log-info">
                                <strong>Sincronizzazione con avvisi</strong>
                                <p>Ieri 20:05 - 245 prodotti aggiornati, 5 prodotti con immagini mancanti</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Orders Section -->
            <section id="orders" class="admin-section">
                <div class="section-header">
                    <h1>Gestione Ordini</h1>
                    <p>Visualizza e gestisci gli ordini ricevuti</p>
                </div>

                <!-- Filtri Ordini -->
                <div class="orders-filters" style="margin-bottom: 20px;">
                    <select id="orderStatusFilter" style="padding: 8px; border-radius: 4px; border: 1px solid #ddd;">
                        <option value="">Tutti gli stati</option>
                        <option value="pending">In attesa</option>
                        <option value="processing">In elaborazione</option>
                        <option value="shipped">Spedito</option>
                        <option value="delivered">Consegnato</option>
                        <option value="cancelled">Annullato</option>
                    </select>
                </div>

                <!-- Container Ordini (popolato dinamicamente) -->
                <div class="orders-list" id="ordersContainer">
                    <p style="text-align: center; padding: 40px; color: #666;">
                        Caricamento ordini...
                    </p>
                </div>
            </section>
        </main>
    </div>


    <!-- Modal Modifica Categoria -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Modifica Categoria Prodotto</h2>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="product-preview">
                    <img id="modalProductImage" src="" alt="Prodotto">
                    <div>
                        <h3 id="modalProductName"></h3>
                        <p id="modalProductId"></p>
                    </div>
                </div>

                <form id="editCategoryForm">
                    <input type="hidden" id="editProductId">

                    <div class="form-group">
                        <label for="editCategory">Categoria Principale</label>
                        <select id="editCategory" name="category" required>
                            <option value="">Seleziona categoria...</option>
                            <option value="smart-living">Smart Living</option>
                            <option value="beauty">Beauty</option>
                            <option value="health-personal-care">Health & Personal Care</option>
                            <option value="tech-innovation">Tech Innovation</option>
                            <option value="natural-wellness">Natural Wellness</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="editSubcategory">Sottocategoria</label>
                        <select id="editSubcategory" name="subcategory" required>
                            <option value="">Seleziona prima una categoria...</option>
                        </select>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancelEdit">Annulla</button>
                        <button type="submit" class="btn-primary">Salva Modifiche</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <style>
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s;
            pointer-events: auto;
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
            color: #2c3e50;
        }

        .modal-close {
            cursor: pointer;
            font-size: 28px;
            color: #999;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: #333;
        }

        .modal-body {
            padding: 20px;
        }

        .product-preview {
            display: flex;
            gap: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .product-preview img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
        }

        .product-preview h3 {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
            color: #2c3e50;
        }

        .product-preview p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }

        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            background-color: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .form-group select:focus {
            outline: none;
            border-color: #3498db;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 25px;
        }

        .btn-primary, .btn-secondary {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #666;
        }

        .btn-secondary:hover {
            background: #e9ecef;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
    </style>
    <script src="admin.js"></script>
</body>
</html>
